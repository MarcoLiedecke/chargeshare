{% extends "base.html" %}

{% block title %}Register - ChargeShare{% endblock %}

{% block additional_styles %}
    .register-container {
        max-width: 500px;
        margin: 80px auto;
    }
    .card-header {
        text-align: center;
        border-radius: 10px 10px 0 0 !important;
        padding: 20px;
        background-color: var(--cs-green);
        color: white;
    }
    .register-btn {
        width: 100%;
        padding: 10px;
    }
    .form-control {
        padding: 12px;
        border: 1px solid var(--cs-grey);
        border-radius: 6px;
    }
    .form-control:focus {
        border-color: var(--cs-green-light);
        box-shadow: 0 0 0 0.25rem rgba(76, 175, 80, 0.25);
    }
    .register-icon {
        display: flex;
        justify-content: center;
        margin-bottom: 1rem;
    }
    .register-icon svg {
        width: 60px;
        height: 60px;
        color: white;
    }
{% endblock %}

{% block nav_items %}
<li class="nav-item">
    <a class="nav-link" href="{{ url_for('index') }}">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 2.5L2 8.5V17.5H7V11.5H13V17.5H18V8.5L10 2.5Z" fill="currentColor"/>
        </svg>
        Home
    </a>
</li>
{% endblock %}

{% block nav_right %}
<div class="d-flex">
    <a href="{{ url_for('login') }}" class="btn btn-outline-primary me-2">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 2C8.897 2 8 2.897 8 4C8 5.103 8.897 6 10 6C11.103 6 12 5.103 12 4C12 2.897 11.103 2 10 2ZM10 7C7.794 7 6 8.794 6 11V13H14V11C14 8.794 12.206 7 10 7Z" fill="currentColor"/>
            <path d="M5 13C3.895 13 3 13.895 3 15V16C3 16.552 3.448 17 4 17H16C16.552 17 17 16.552 17 16V15C17 13.895 16.105 13 15 13H5Z" fill="currentColor"/>
        </svg>
        Login
    </a>
    <a href="{{ url_for('register') }}" class="btn btn-primary active">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 2C8.897 2 8 2.897 8 4C8 5.103 8.897 6 10 6C11.103 6 12 5.103 12 4C12 2.897 11.103 2 10 2ZM10 7C7.794 7 6 8.794 6 11V13H14V11C14 8.794 12.206 7 10 7Z" fill="currentColor"/>
            <path d="M14 7H16V9H18V11H16V13H14V11H12V9H14V7Z" fill="currentColor"/>
        </svg>
        Register
    </a>
</div>
{% endblock %}

{% block content %}
<div class="container register-container">
    <div class="card">
        <div class="card-header">
            <div class="register-icon">
                <svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M30 6C25.038 6 21 10.038 21 15C21 19.962 25.038 24 30 24C34.962 24 39 19.962 39 15C39 10.038 34.962 6 30 6ZM30 27C23.37 27 15 30.33 15 37V45H45V37C45 30.33 36.63 27 30 27Z" fill="white"/>
                    <path d="M42 18H48V24H54V30H48V36H42V30H36V24H42V18Z" fill="white"/>
                </svg>
            </div>
            <h2>Create an Account</h2>
            <p class="mb-0">Join the ChargeShare community</p>
        </div>
        <div class="card-body p-4">
            {% with messages = get_flashed_messages() %}
            {% if messages %}
            <div class="alert alert-danger">
                {{ messages[0] }}
            </div>
            {% endif %}
            {% endwith %}
            
            <form method="POST">
                <div class="mb-3">
                    <label for="name" class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="name" name="name" required>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email address</label>
                    <input type="email" class="form-control" id="email" name="email" required>
                    <div class="form-text">We'll never share your email with anyone else.</div>
                </div>
                <div class="mb-3">
                    <label for="password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="password" name="password" required>
                    <div class="form-text">Password must be at least 8 characters long.</div>
                </div>
                <div class="mb-3">
                    <label for="confirm_password" class="form-label">Confirm Password</label>
                    <input type="password" class="form-control" id="confirm_password" name="confirm_password" required>
                </div>
                <div class="mb-3 form-check">
                    <input type="checkbox" class="form-check-input" id="terms" required>
                    <label class="form-check-label" for="terms">I agree to the <a href="#" style="color: var(--cs-green);">Terms and Conditions</a></label>
                </div>
                <button type="submit" class="btn btn-primary register-btn">Create Account</button>
            </form>
            
            <div class="mt-4 text-center">
                <p>Already have an account? <a href="{{ url_for('login') }}" class="text-decoration-none" style="color: var(--cs-green);">Login here</a></p>
            </div>
        </div>
    </div>
    <div class="text-center mt-3">
        <a href="{{ url_for('index') }}" class="text-decoration-none" style="color: var(--cs-green-dark);">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 4px;">
                <path d="M15 8H1M1 8L8 15M1 8L8 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Back to home
        </a>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Simple client-side password validation
    document.querySelector('form').addEventListener('submit', function(e) {
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirm_password').value;
        
        if (password.length < 8) {
            alert('Password must be at least 8 characters long.');
            e.preventDefault();
            return;
        }
        
        if (password !== confirmPassword) {
            alert('Passwords do not match.');
            e.preventDefault();
            return;
        }
    });
</script>
{% endblock %}